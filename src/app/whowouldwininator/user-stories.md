can help finish the whowouldwininator app that I've started?

Whowouldwininator is a workflow that uses LLMs to generate the outcome of a hypothetical battle.

api/backend is located in /app/api/v1/whowouldwininator

User Stories to Complete

# DONE 1. step 1 describe characters

The user should be able to input the details of two characters (name and optional description).

# DONE 1-1. step 1 rendom character

The user should be able to generate a random character name and description. When they do, they should not see repeat characters.

Eng note: The character name should be generated by first choosing a random category from a large list of character categories, then using that category as context in the LLM call.

# DONE 2. step 2 review characters - generated content

the user should see the individual details of the characters load as the details are generated. The details of the characters should be generated uniquely each time using LLMs, which should be done granularly to maximize the quality and response time of the generative models.

Broadly, we should break the LLM calls into api endpoints that get:

- backstory (string)
- powers (list of strings)
- stats (object literal)
- feats (list of strings)
- portrait (object with image file url and image meta)

For generating stats, come up with a consistent scale to apply to each stat. So that the characters are compared on each stat as consistently as possible.

# DONE 2. step 2 review characters - editing

The user should be able to edit all of the details of both characters before moving to the next step

# DONE 2-1. step 2 review characters - generated image progressive safety easing and backoff

In order to ensure a smooth experience for the user, when the image generation fails with a 400 error for safety we should generate a new prompt using an LLM that is rewritten to be more sensitive to the safety issue (the error should be provided for context), we should try this process 3 times, progressively making the image generation prompt more safe, and if it still fails provide a default image as a backup

example prompt: `this image generation prompt failed due to ${error?.message || "a safety error"}. Please respond with a new prompt that addresses the concerns of the previous failure, but remains as close to what the user is asking for as possible. If the user was asking for a generation of a copyrighted character, for example, try describing that character in vague terms that are not specific to that character, or describing details that allude to the character without saying it outright. e.g. "left webbing behind", "a lean but muscular young man in a tight fitting superhero costume, swinging from a white rope", etc`

# DONE 3. step 3 define scenario

The user should be able to describe the details of the scenario. They can add any contest rules, define the setting, obstacles, limitations, and anything else they want in the contest. If the user skips this step, it's assumed that the characters are fighting to TKO and are at the peak of their abilities in their respective canon and in an open field

# 4. step 4 view results - generate winner

The user should be able to see the winner and a confidence score based on the characters and the scenario. For example superman vs a common human would be 10/10 for superman. Superman playing chess vs an average human might be a 5/10. The user should be able to see the winner on this step as soon as it loads, and it should be the first thing to load to feed into the other generations. A tie should also be possible .

# 5. step 4 view results - generate contest story

The user should be able to see a cinematic description of the content (usually a battle, but it depends on what the user chose) generated by AI. This should be dependent on the previous call to determine the winner, so that the story is consistent with the outcome.

# 5. step 4 view results - generate contest image

The user should be able to see a cool AI generated image of the contest
